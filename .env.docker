# =============================================================================
# EVAonline - Template de Configuração (COPIE PARA .env OU .env.local)
# =============================================================================
#  INSTRUÇÕES:
# 1. Copie este arquivo para .env (desenvolvimento local)
# 2. Customize os valores para seu ambiente
# 3. NUNCA commite .env ou .env.* (exceto .env.example)!
# 4. Adicione .env e .env.* ao .gitignore
#
#  GERAÇÃO DE CREDENCIAIS SEGURAS:
#  POSTGRES_PASSWORD: python -c "import secrets; print(secrets.token_urlsafe(32))"
#  REDIS_PASSWORD:    python -c "import secrets; print(secrets.token_urlsafe(32))"
#  SECRET_KEY:        python -c "import secrets; print(secrets.token_hex(32))"
#  GRAFANA_PASSWORD:  python -c "import secrets; print(secrets.token_urlsafe(16))"

# =============================================================================
# AMBIENTE
# =============================================================================
ENVIRONMENT=development
DEBUG=True
PYTHONUNBUFFERED=1
PYTHONUTF8=1

# =============================================================================
# BANCO DE DADOS (PostgreSQL)
# =============================================================================
POSTGRES_HOST=postgres
POSTGRES_PORT=5432
POSTGRES_USER=evaonline
POSTGRES_PASSWORD=CHANGE_THIS_STRONG_PASSWORD_IN_PRODUCTION
POSTGRES_DB=evaonline

# Connection Pooling
DB_POOL_SIZE=5
DB_MAX_OVERFLOW=10
DB_POOL_RECYCLE=3600
DB_POOL_TIMEOUT=30

# =============================================================================
# REDIS
# =============================================================================
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_DB=0
REDIS_PASSWORD=CHANGE_THIS_STRONG_REDIS_PASSWORD_IN_PRODUCTION

REDIS_MAX_CONNECTIONS=50
REDIS_SOCKET_TIMEOUT=10
REDIS_SOCKET_CONNECT_TIMEOUT=5

# =============================================================================
# CELERY
# =============================================================================
CELERY_WORKER_CONCURRENCY=2
CELERY_WORKER_PREFETCH_MULTIPLIER=4
CELERY_TASK_SOFT_TIME_LIMIT=300
CELERY_TASK_TIME_LIMIT=600

# =============================================================================
# CACHE
# =============================================================================
CACHE_TTL=1800
CACHE_SHORT_TTL=300
CACHE_LONG_TTL=3600
CACHE_ENABLED=True
CACHE_COMPRESSION=False
CACHE_KEY_PREFIX=evaonline

# =============================================================================
# EXTERNAL APIs - URLs e Configurações
# =============================================================================
# NASA POWER (Domínio Público - NASA)
# Dados do projeto Prediction Of Worldwide Energy Resources (POWER)
# Requer referência: "Data obtained from NASA Langley Research Center POWER Project"
# Notificar publicações para: larc-power-project@mail.nasa.gov
NASA_POWER_URL=https://power.larc.nasa.gov/api/temporal/daily/point
NASA_POWER_TIMEOUT=30

# Open-Meteo (CC BY 4.0 - Atribuição obrigatória)
# Dados da API sob Attribution 4.0 International (CC BY 4.0)
# Requer atribuição: "Weather data by Open-Meteo.com" com link
# Código fonte: GNU Affero General Public Licence Version 3 (AGPLv3)
OPENMETEO_ARCHIVE_URL=https://archive-api.open-meteo.com/v1/archive
OPENMETEO_FORECAST_URL=https://api.open-meteo.com/v1/forecast
OPENMETEO_TIMEOUT=30

# MET Norway (NLOD 2.0 + CC BY 4.0 - Atribuição obrigatória)
# Norwegian Licence for Open Government Data + Creative Commons 4.0 BY International
# Requer atribuição: "Data from MET Norway" ou "Based on data from MET Norway"
# User-Agent obrigatório com identificação da aplicação
MET_NORWAY_URL=https://api.met.no/weatherapi/locationforecast/2.0/complete
MET_NORWAY_TIMEOUT=30

# FROST API (Dados históricos - MET Norway)
# Autenticação OAuth2 obrigatória - Credenciais do registro no MET Norway
# INSTRUÇÕES: Registre-se em https://frost.met.no/auth/requestCredentials.html
# Substitua pelos valores reais após registro
FROST_CLIENT_ID=YOUR_FROST_CLIENT_ID_HERE
FROST_CLIENT_SECRET=YOUR_FROST_CLIENT_SECRET_HERE
FROST_AUTH_URL=https://frost.met.no/auth/accessToken
FROST_OBSERVATIONS_URL=https://frost.met.no/observations/v0.jsonld
FROST_AVAILABLE_TIMESERIES_URL=https://frost.met.no/observations/availableTimeSeries/v0.jsonld
FROST_TIMEOUT=30

# NWS / NOAA (Domínio Público - Governo USA)
NWS_BASE_URL=https://api.weather.gov
NWS_TIMEOUT=30

# Configurações gerais de APIs externas
EXTERNAL_API_RATE_LIMIT=1000
EXTERNAL_API_MAX_RETRIES=3
EXTERNAL_API_RETRY_DELAY=1.0

# =============================================================================
# USER AGENTS para APIs externas (conforme requisitos de cada API)
# =============================================================================
MET_NORWAY_USER_AGENT=EVAonline/1.0 (https://github.com/angelassilviane/Evaonline_Temp)
NWS_USER_AGENT=(EVAonline/1.0, https://github.com/angelassilviane/Evaonline_Temp)

# =============================================================================
# MONITORAMENTO & LOGGING
# =============================================================================
PROMETHEUS_ENABLED=True
PROMETHEUS_PORT=8001

LOG_LEVEL=DEBUG
LOG_FORMAT=console

HEALTH_CHECK_ENDPOINT=/api/v1/health
READINESS_ENDPOINT=/api/v1/ready

# =============================================================================
# SEGURANÇA
# =============================================================================
# SECRET_KEY segura gerada com secrets.token_hex(32)
# COMANDO PARA GERAR: python -c "import secrets; print(secrets.token_hex(32))"
SECRET_KEY=CHANGE_THIS_TO_A_SECURE_SECRET_KEY_GENERATED_WITH_SECRETS_MODULE

# CORS - Mais restritivo para desenvolvimento
BACKEND_CORS_ORIGINS=["http://localhost:8000","http://localhost:8050","http://127.0.0.1:8000","http://127.0.0.1:8050"]
CORS_ALLOW_CREDENTIALS=True

# Rate Limiting
RATE_LIMIT_ENABLED=False
RATE_LIMIT_REQUESTS=1000
RATE_LIMIT_WINDOW=60

# Headers de segurança adicionais
SECURE_HEADERS_ENABLED=True
SECURE_HEADERS_HSTS=False  # Desabilitado para desenvolvimento local
SECURE_HEADERS_CSP=False   # Desabilitado para desenvolvimento local

# =============================================================================
# PERFORMANCE
# =============================================================================
API_MAX_CONNECTIONS=50
API_TIMEOUT=30

# =============================================================================
# TIMEZONE & LOCALE
# =============================================================================
TZ=America/Sao_Paulo
LANG=pt_BR.UTF-8
LC_ALL=pt_BR.UTF-8

# =============================================================================
# DASH
# =============================================================================
DASH_URL_BASE_PATHNAME=/
DASH_ASSETS_FOLDER=frontend/assets
DASH_COMPRESS_ASSETS=False
DASH_INCLUDE_ASSETS_FILES=True
DASH_DEBUG=True
FASTAPI_RELOAD=True

# =============================================================================
# CLIMATE DATA SERVICES
# =============================================================================
# Sistema suporta 7 fontes de dados climáticos:
# 1. NASA POWER (Global, histórico desde 1981)
# 2. MET Norway Locationforecast (Global, forecast até 14 dias)
# 3. MET Norway Frost (Histórico Norway, OAuth2)
# 4. NWS/NOAA (USA Continental, forecast até 7 dias)
# 5. Open-Meteo Archive (Global, histórico desde 1940)
# 6. Open-Meteo Forecast (Global, forecast até 16 dias)
# 7. Open-Meteo Smart (Auto-seleção Archive/Forecast)
#
# Cada service tem suas próprias configurações de API acima.
# Ver documentação de cada service para requisitos específicos.

# =============================================================================
# DOCKER
# =============================================================================
COMPOSE_PROJECT_NAME=evaonline_temp
